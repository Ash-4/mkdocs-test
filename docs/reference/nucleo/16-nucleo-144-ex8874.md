# Nucleo 144 - EX8874

Review of **motor shield define** from MotorDrivers.h

```cpp
  #if defined(ARDUINO_NUCLEO_F429ZI) || defined(ARDUINO_NUCLEO_F439ZI) || defined(ARDUINO_NUCLEO_F4X9ZI)  
  // EX 8874 based shield connected to a 3V3 system with 12-bit (4096) ADC  
  // The Ethernet capable STM32 models cannot use Channel B BRAKE on D8, and must use the ALT pin of D6,  
  // AND cannot use Channel B PWN on D11, but must use the ALT pin of D5  
  #define EX8874_SHIELD F("EX8874"), \  
    new MotorDriver( 3, 12, UNUSED_PIN, 9, A0, 1.27, 5000, A4), \  
    new MotorDriver( 5, 13, UNUSED_PIN, 6, A1, 1.27, 5000, A5)  
```

Alternate pins D5 and D6 are required for the Nucleo-144 boards with Ethernet.  

 &nbsp; &nbsp; &nbsp; &nbsp; ![EX8874 Nucleo-144 pins](/_static/images/nucleo/ex8874-nucleo-144.png){: style="width: 70%"}

One EX8874 motor shield would use the standard motor define EX8874_SHIELD, and update the solder pads to use D5 and D6.  

### Stacked EX8874 motor shield on Nucleo-144

 &nbsp; &nbsp; &nbsp; &nbsp; ![Stacked EX8874 Nucleo-144](/_static/images/nucleo/ex8874x2-nucleo-144.png){: style="width: 50%" align=right}

- Stacked EX8874 motor shields require a custom motor define, and now to select the pins to fill the blanks in the table.

&nbsp; &nbsp; &nbsp; &nbsp; ![Stacked EX8874 Nucleo-144](/_static/images/nucleo/ex8874x2b-nucleo-144.png){: style="width: 50%" align=right}

- Tracks A and B can use the same alternate pins D5 and D6 as it would if only one shield was used.  Pins were selected so that the stacked motor shield pins D11,D9,D8,A4,A5 can be bent out, and short jumpers added to connect pins D7,D28,D29,D60,D67.

 <div style="clear: both;"></div>
- A custom motor define will be needed in config.h

```cpp
  #define EX8874_SHIELDX2 F("EX8874_SHIELDX2"), \  
    new MotorDriver( 3, 12, UNUSED_PIN,  9, A0, 1.27, 5000, A4), \  
    new MotorDriver( 5, 13, UNUSED_PIN,  6, A1, 1.27, 5000, A5), \  
    new MotorDriver( 2, 10, UNUSED_PIN, 28, A2, 1.27, 5000, 60), \  
    new MotorDriver( 7,  4, UNUSED_PIN, 29, A3, 1.27, 5000, 67)  
  #define MOTOR_SHIELD_TYPE EX8874_SHIELDX2
```
